# /srv/auto-adsense/Caddyfile
# Caddy konfigürasyonu - sadece localhost dashboard

# Dashboard - Ana kontrol paneli (localhost)
:8090 {
    reverse_proxy dashboard:8080
    
    # Gzip sıkıştırma
    encode gzip
    
    # Güvenlik başlıkları
    header {
        X-Content-Type-Options nosniff
        X-Frame-Options DENY
        X-XSS-Protection "1; mode=block"
        Referrer-Policy strict-origin-when-cross-origin
    }
}

# n8n Workflow yönetimi (localhost)
:8091 {
    reverse_proxy n8n:5678
    
    encode gzip
    
    header {
        X-Content-Type-Options nosniff
        X-Frame-Options SAMEORIGIN
        X-XSS-Protection "1; mode=block"
    }
}

# devqora.space - Dashboard Interface (HTTP only, SSL via Cloudflare)
http://devqora.space, http://www.devqora.space {
    reverse_proxy devqora-dashboard:8080 {
        header_up Host {upstream_hostport}
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
    }
    
    encode gzip
    
    header {
        X-Content-Type-Options nosniff
        X-Frame-Options SAMEORIGIN
        X-XSS-Protection "1; mode=block"
        Referrer-Policy strict-origin-when-cross-origin
    }
}